@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor httpContextAccessor
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@using VLUTUTORS.Models;
@{
    ViewData["Title"] = "Liên Hệ";
    Layout = "~/Views/Shared/_otherPageLayout.cshtml";
    var noiDung = new CP25Team01Context().Noidungs.FirstOrDefault(m => m.Id == 1);
}

<section id="contact-page" class="pt-30 pb-30 gray-bg">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <div class="contact-from">
                    <div class="section-title">
                        <h2>Liên hệ với chúng tôi</h2>
                    </div>
                    <!-- section title -->
                    <div class="main-form">
                        <form id="contact-form"
                              method="post"
                              data-toggle="validator" enctype="multipart/form-data" asp-controller="Home" asp-action="Contact">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="singel-form form-group">
                                        @{
                                            if (@httpContextAccessor.HttpContext.Session.GetString("loginName") != null)
                                            {
                                                <input name="HoVaTen"
                                                       id="HoVaTen"
                                                       type="text"
                                                       value="@httpContextAccessor.HttpContext.Session.GetString("loginName")"
                                                       data-error="Vui lòng điền đủ thông tin."
                                                       required="required" />
                                                <div class="help-block with-errors"></div>
                                            }
                                            else
                                            {
                                                <input name="HoVaTen"
                                                       id="HoVaTen"
                                                       type="text"
                                                       placeholder="Tên của bạn"
                                                       data-error="Vui lòng điền đủ thông tin."
                                                       required="required" />
                                                <div class="help-block with-errors"></div>
                                            }
                                        }
                                    </div>
                                    <!-- singel form -->
                                </div>
                                <div class="col-md-6">
                                    <div class="singel-form form-group">
                                        @{
                                            if (@httpContextAccessor.HttpContext.Session.GetString("loginEmail") != null)
                                            {
                                                <input name="Email"
                                                       id="Email"
                                                       type="email"
                                                       value="@httpContextAccessor.HttpContext.Session.GetString("loginEmail")"
                                                       data-error="Vui lòng điền đủ thông tin."
                                                       required="required" />
                                                <div class="help-block with-errors"></div>
                                            }
                                            else
                                            {
                                                <input name="Email"
                                                       id="Email"
                                                       type="email"
                                                       placeholder="Email"
                                                       data-error="Vui lòng nhập địa chỉ email hợp lệ. Định dạng email chính xác là example@gmail.com."
                                                       required="required" />
                                                <div class="help-block with-errors"></div>
                                            }
                                        }
                                    </div>
                                    <!-- singel form -->
                                </div>
                                <div class="col-md-6">
                                    <div class="singel-form form-group">
                                        <input name="MonHoc"
                                               id="MonHoc"
                                               type="text"
                                               placeholder="Môn học"
                                               data-error="Vui lòng điền đủ thông tin."
                                               required="required" />
                                        <div class="help-block with-errors"></div>
                                    </div>
                                    <!-- singel form -->
                                </div>
                                <div class="col-md-6">
                                    <div class="singel-form form-group">
                                        <input name="Sdt"
                                               id="Sdt"
                                               type="number"
                                               placeholder="Điện thoại"
                                               data-error="Vui lòng điền đủ thông tin."
                                               required="required" />
                                        <div class="help-block with-errors"></div>
                                    </div>
                                    <!-- singel form -->
                                </div>
                                <div class="col-md-12">
                                    <div class="singel-form form-group">
                                        <textarea name="NoiDung"
                                                  id="NoiDung"
                                                  placeholder="Vấn đề bạn gặp phải"
                                                  data-error="Vui lòng điền đủ thông tin."
                                                  required="required"></textarea>
                                        <div class="help-block with-errors"></div>
                                    </div>
                                    <!-- singel form -->
                                </div>
                                <input type="hidden" name="IdtrangThai" id="IdtrangThai" value="1" />
                                <div class="col-md-12">
                                    <div class="singel-form">
                                        <button type="submit" class="main-btn">Gửi liên hệ</button>
                                    </div>
                                    <!-- singel form -->
                                </div>
                            </div>
                            <!-- row -->
                        </form>
                    </div>
                    <!-- main form -->
                </div>
                <!--  contact from -->
            </div>
            <div class="col-lg-4">
                <div class="contact-address">
                    <div class="contact-heading">
                        <h4>
                            <b>
                                Nếu bạn có bất kỳ câu hỏi nào khác, vui lòng liên hệ với chúng tôi.
                            </b>
                        </h4>
                    </div>
                    <ul>
                        <li>
                            <div class="singel-address">
                                <div class="icon">
                                    <i class="fa fa-home"></i>
                                </div>
                                <div class="cont">
                                    <p>
                                        @noiDung.DiaChi
                                    </p>
                                </div>
                            </div>
                            <!-- singel address -->
                        </li>
                        <li>
                            <div class="singel-address">
                                <div class="icon">
                                    <i class="fa fa-phone"></i>
                                </div>
                                <div class="cont">
                                    <p>
                                        @noiDung.Sdt
                                    </p>
                                </div>
                            </div>
                            <!-- singel address -->
                        </li>
                        <li>
                            <div class="singel-address">
                                <div class="icon">
                                    <i class="fa fa-envelope-o"></i>
                                </div>
                                <div class="cont">
                                    <p>
                                        @noiDung.Email
                                    </p>
                                </div>
                            </div>
                            <!-- singel address -->
                        </li>
                        <li>
                            <div class="singel-address">
                                <div class="icon">
                                    <i class="fa-brands fa-facebook"></i>
                                </div>
                                <div class="cont">
                                    <p>
                                        @noiDung.Facebook
                                    </p>
                                </div>
                            </div>
                            <!-- singel address -->
                        </li>
                    </ul>
                </div>
                <!-- contact address -->
            </div>
        </div>
        <!-- row -->
    </div>
    <!-- container -->

</section>
@section scripts{
    @if (TempData["Message"] != null)
    {
        <script>
            var messageType = '@TempData["MessageType"]';
        var message = '@TempData["Message"]';

        // Display the message using Toastr library
        if (messageType === "success") {
            toastr.success(message);
        } else if (messageType === "error") {
            toastr.error(message);
        } else if (messageType === "warning") {
            toastr.warning(message);
        } else if (messageType === "info") {
            toastr.info(message);
        }
        </script>
    }
    @if (ViewBag.Message != null)
    {
        <script type="text/javascript">
            window.onload = function () {
                alert("@ViewBag.Message");
            };
        </script>
    }
    <script src="~/js/app.js"></script>
    <script>
        $(function () {
    // Check for a success message in TempData
    var toastrSuccess = '@(TempData["toastr-success"])';
    if (toastrSuccess) {
        toastr.success(toastrSuccess);
    }

    // Check for an error message in TempData
    var toastrError = '@(TempData["toastr-error"])';
    if (toastrError) {
        toastr.error(toastrError);
    }
});
    </script>
}

